
$(document).on("click",".try-it-out",(function(){const t=$(this).data("api"),e=$(this).data("endpoint"),n=$(this).data("method-color"),a=$(this).data("method"),s=$(this).data("decrease-request"),i=$("#apikey").val(),d=$(`#table-request-params-${t} tbody tr`).map((function(){const t=$(this).find("td:nth-child(1)").text().replace(/\s\*$/,""),e=$(this).find("td:nth-child(2)").text(),n=$(this).find("td:nth-child(3)").find("span").map((function(){return $(this).text()})).get();return{name:t,type:e,required:$(this).find("td:nth-child(1)").find("span").length?"true":"false",desc:$(this).find("td:nth-child(4)").text(),range:n}})).get(),l=$(`#table-request-body-${t} tbody tr`).map((function(){const t=$(this).find("td:nth-child(1)").text().replace(/\s\*$/,""),e=$(this).find("td:nth-child(2)").text(),n=$(this).find("td:nth-child(3)").find("span").map((function(){return $(this).text()})).get();return{name:t,type:e,required:$(this).find("td:nth-child(1)").find("span").length?"true":"false",desc:$(this).find("td:nth-child(4)").text(),range:n}})).get();let o="";for(const t of[...d,...l])t.name=t.name.replace(/\s\*$/,""),console.log(t),o+=`<label class="form-label">${t.name}${"true"==t.required?'<span class="text-danger" data-bs-toggle="tooltip" data-bs-placement="top" title="this param is required"> *</span>':""}</label>`,t.type.includes("file")||t.type.includes("File")?o+=`<input class="form-control" type="file" placeholder="${t.desc}" value="${t.example||""}" name="${t.name}" ${"true"==t.required?"required":""}>`:t.range?.length?o+=`<select class="form-select" name="${t.name}" ${"true"==t.required?"required":""}>${t.range.map((t=>`<option value="${t}">${t}</option>`)).join("")}</select>`:o+=`<input class="form-control" type="text" placeholder="${t.desc}" value="${"apikey"==t.name?i:t.example||""}" name="${t.name}" ${"true"==t.required?"required":""}>`;const r=$(`<div class="modal fade" tabindex="-1" aria-hidden="true">\n\t\t<div class="modal-dialog modal-dialog-centered">\n\t\t\t<div class="modal-content">\n\n\t\t\t\t<div class="modal-header">\n\t\t\t\t\t<h5 class="modal-title">${n} ${e}</h5>\n\t\t\t\t\t<button class="btn p-1" type="button" data-bs-dismiss="modal" aria-label="Close">\n\t\t\t\t\t\t<span class="fas fa-times fs--1"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<form method="${a}" action="${e}" target="_blank" enctype="multipart/form-data">\n\t\t\t\t\t<div class="modal-body">\n\t\t\t\t\t\t<div class="alert alert-soft-warning" role="alert">\n\t\t\t\t\t\t\t<span class="fas fa-exclamation-circle me-2"></span>\n\t\t\t\t\t\t\t<span>${s} request will be decreased after this request.</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${o}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t\t<button class="btn btn-outline-primary" type="button" data-bs-dismiss="modal">Cancel</button>\n\t\t\t\t\t\t<button class="btn btn-primary" type="submit" >Send</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`);$("body").append(r),r.modal("show"),r.on("hidden.bs.modal",(function(){r.remove()})),r.on("shown.bs.modal",(function(){const t=$(this).find("input").first();if(t.focus(),!t.val())return;const e=2*t.val().length;t[0].setSelectionRange(e,e)}))}));